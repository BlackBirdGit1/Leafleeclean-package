<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Your Free Cleaning Estimate &amp; Book | Leaflee Clean</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- UPDATED: Google Font changed to Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* Custom Styles */
        body {
            /* UPDATED: Font family changed to Poppins */
            font-family: 'Poppins', sans-serif;
            background-color: #f9fafb; /* Light gray background */
        }

        /* Custom scrollbar for the price table on mobile */
        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
        }

        /* Make table full-width until it hits its min-width */
        .table-responsive table {
            min-width: 800px; /* Ensures headers don't wrap ugly */
            width: 100%;
        }
        
        /* Custom radio button styles */
        input[type="radio"]:checked + label {
            border-color: #10B981; /* Green-500 */
            box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.1), 0 2px 4px -1px rgba(16, 185, 129, 0.06);
            transform: translateY(-2px);
        }
        
        /* Custom checkbox styles */
        input[type="checkbox"]:checked {
            background-color: #10B981;
            border-color: #10B981;
        }

        /* Styling for disabled add-ons */
        input[type="checkbox"]:disabled + span {
            color: #9ca3af; /* gray-400 */
        }
        input[type="checkbox"]:disabled:checked {
            background-color: #6ee7b7; /* emerald-300 */
            border-color: #6ee7b7;
        }

    </style>
</head>
<body class="text-gray-800">

    <!-- Header -->
    <!-- UPDATED: Set fixed height h-32 (8rem) and removed vertical padding -->
    <header class="bg-white shadow-sm h-32">
        <!-- UPDATED: Container is now flex, centers logo, and fills header height -->
        <div class="container mx-auto px-4 sm:px-6 h-full flex items-center justify-center">
            <!-- 
                UPDATED: Replaced the H1 and P tags with your logo.
                This assumes you've uploaded the logo as 'logo.png' to the root of your repository.
            -->
            <!-- UPDATED: Logo size set to h-28 (7rem) -->
            <img src="logo.png" alt="Leaflee Clean Logo" class="h-36 w-auto">
        </div>
    </header>

    <!-- Main Content -->
    <!-- UPDATED: Added px-4 sm:px-6 for mobile padding -->
    <main class="container mx-auto px-4 sm:px-6 py-12 max-w-6xl">

        <!-- Calculator Section -->
        <section id="calculator" class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg mb-12">
            <h2 class="text-2xl sm:text-3xl font-bold text-center mb-8 text-green-700">Step 1: Get Your Instant Estimate</h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Left Column: Selections (Spans 2 columns) -->
                <div class="md:col-span-2">
                    <!-- Step 1: Home Size -->
                    <div class="mb-6">
                        <label for="homeSize" class="block text-lg font-semibold mb-2 text-gray-700">1. Select Your Home Size</label>
                        <!-- UPDATED: All values changed to match the new spreadsheet data -->
                        <select id="homeSize" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition">
                            <option value='{"standard": {"low": 102, "high": 153}, "deep": {"low": 153, "high": 230}, "moveout": {"low": 204, "high": 306}}'>Apartment / < 1,000 sq. ft.</option>
                            <option value='{"standard": {"low": 128, "high": 179}, "deep": {"low": 191, "high": 268}, "moveout": {"low": 255, "high": 357}}'>1,001 - 1,500 sq. ft.</option>
                            <option value='{"standard": {"low": 179, "high": 230}, "deep": {"low": 268, "high": 344}, "moveout": {"low": 357, "high": 459}}' selected>1,501 - 2,000 sq. ft.</option>
                            <option value='{"standard": {"low": 230, "high": 281}, "deep": {"low": 344, "high": 421}, "moveout": {"low": 459, "high": 561}}'>2,001 - 2,500 sq. ft.</option>
                            <option value='{"standard": {"low": 281, "high": 332}, "deep": {"low": 421, "high": 497}, "moveout": {"low": 561, "high": 663}}'>2,501 - 3,000 sq. ft.</option>
                            <option value='{"standard": {"low": 0, "high": 0}, "deep": {"low": 0, "high": 0}, "moveout": {"low": 0, "high": 0}}' data-custom="true">3,000+ sq. ft.</option>
                        </select>
                    </div>

                    <!-- Step 2: Package Type -->
                    <div class="mb-6">
                        <h3 class="block text-lg font-semibold mb-3 text-gray-700">2. Choose Your Package</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                            <input type="radio" name="packageType" value="standard" id="pkgStandard" class="hidden" checked>
                            <label for="pkgStandard" class="block p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition-all duration-200 ease-in-out text-center hover:border-gray-400">
                                <span class="font-bold text-green-700">Standard</span>
                                <span class="text-sm text-gray-500 block">The Refresh</span>
                            </label>

                            <input type="radio" name="packageType" value="deep" id="pkgDeep" class="hidden">
                            <label for="pkgDeep" class="block p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition-all duration-200 ease-in-out text-center hover:border-gray-400">
                                <span class="font-bold text-blue-700">Deep</span>
                                <span class="text-sm text-gray-500 block">The Overhaul</span>
                            </label>

                            <input type="radio" name="packageType" value="moveout" id="pkgMoveout" class="hidden">
                            <label for="pkgMoveout" class="block p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition-all duration-200 ease-in-out text-center hover:border-gray-400">
                                <span class="font-bold text-purple-700">Move-Out</span>
                                <span class="text-sm text-gray-500 block">Empty Home</span>
                            </label>
                            
                            <input type="radio" name="packageType" value="custom" id="pkgCustom" class="hidden">
                            <label for="pkgCustom" class="block p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition-all duration-200 ease-in-out text-center hover:border-gray-400">
                                <span class="font-bold text-orange-700">Custom</span>
                                <span class="text-sm text-gray-500 block">Event/Other</span>
                            </label>
                        </div>
                    </div>

                    <!-- Step 3: Add-Ons -->
                    <div>
                        <h3 class="block text-lg font-semibold mb-3 text-gray-700">3. Select Add-Ons</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition duration-150">
                                <input type="checkbox" id="addonFridge" data-name="Inside the Refrigerator" value="30" class="h-5 w-5 rounded text-green-600 border-gray-300 focus:ring-green-500">
                                <span class="ml-3 text-gray-700">Inside the Refrigerator <span class="text-gray-500">(+$30)</span></span>
                            </label>
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition duration-150">
                                <input type="checkbox" id="addonOven" data-name="Inside the Oven" value="35" class="h-5 w-5 rounded text-green-600 border-gray-300 focus:ring-green-500">
                                <span class="ml-3 text-gray-700">Inside the Oven <span class="text-gray-500">(+$35)</span></span>
                            </label>
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition duration-150">
                                <input type="checkbox" id="addonWindows" data-name="Interior Windows" value="45" class="h-5 w-5 rounded text-green-600 border-gray-300 focus:ring-green-500">
                                <span class="ml-3 text-gray-700">Interior Windows (reachable) <span class="text-gray-500">(+$45)</span></span>
                            </label>
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition duration-150">
                                <input type="checkbox" id="addonGarage" data-name="Sweep Garage or Porch" value="25" class="h-5 w-5 rounded text-green-600 border-gray-300 focus:ring-green-500">
                                <span class="ml-3 text-gray-700">Sweep Garage or Porch <span class="text-gray-500">(+$25)</span></span>
                            </label>
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition duration-150">
                                <input type="checkbox" id="addonLaundry" data-name="Laundry (per load)" value="20" class="h-5 w-5 rounded text-green-600 border-gray-300 focus:ring-green-500">
                                <span class="ml-3 text-gray-700">Laundry (per load) <span class="text-gray-500">(+$20)</span></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Total (Spans 1 column) -->
                <div class="bg-green-50 p-6 rounded-2xl border border-green-200">
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Your Estimate Summary</h3>
                    
                    <!-- Price Display -->
                    <!-- UPDATED: Made text responsive for mobile -->
                    <!-- UPDATED: Default price changed to match new spreadsheet data -->
                    <p id="totalEstimateDisplay" class="text-4xl sm:text-5xl font-extrabold text-green-700 mb-2">$179 - $230</p>
                    <p id="customQuoteMessage" class="text-xl font-semibold text-green-700 hidden">Custom Quote Required</p>
                    
                    <p class="text-xs text-gray-500 mb-4">This is a real-time estimate. Your final, locked-in price will be confirmed during your free, no-obligation walkthrough.</p>
                    
                    <hr class="border-green-200 my-4">

                    <!-- Package Details -->
                    <div>
                        <h4 class="text-lg font-semibold text-gray-800" id="packageTitle">The Standard Clean</h4>
                        <ul class="list-disc list-inside text-gray-600 text-sm space-y-1 mt-2" id="packageDetails">
                            <li>Dust all surfaces & ceiling fans</li>
                            <li>Vacuum carpets & mop floors</li>
                            <li>Wipe kitchen counters & sink</li>
                            <li>Clean exterior of appliances</li>
                            <li>Clean & sanitize all bathrooms</li>
                        </ul>
                    </div>

                    <!-- Add-Ons Details -->
                    <div class="mt-4">
                        <h4 class="text-lg font-semibold text-gray-800">Selected Add-Ons</h4>
                        <p class="text-gray-600 text-sm" id="addonsList">None</p>
                    </div>

                    <!-- Scroll to Schedule Button -->
                    <button id="scrollToSchedule" class="mt-6 w-full bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-green-700 transition duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2">Schedule Your Free Quote Visit</button>
                </div>
            </div>
        </section>


        <!-- Calendly Embed Section -->
        <!-- Removed shadow-lg and mb-12 to make it blend -->
        <section id="schedule" class="bg-white p-6 sm:p-8 rounded-2xl">
            <h2 class="text-2xl sm:text-3xl font-bold text-center mb-8 text-gray-800">Step 2: Schedule Your Free On-Site Quote</h2>
            <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">Your estimate looks great. Let's lock it in! Book a free, 15-minute walkthrough so we can provide a final, guaranteed quote. No obligations, just a firm price.</p>
            
            <div 
                id="calendly-widget" 
                style="min-width:320px;height:700px;"
            ></div>
        </section>


        <!-- Summary Tables Section - REMOVED AS REQUESTED -->


    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-12">
        <!-- UPDATED: Replaced entire footer content with the new simple version -->
        <div class="container mx-auto px-4 sm:px-6 py-8 max-w-6xl text-center text-gray-500 text-sm">
            <p>
                &copy; 2025 Leaflee Cleaning | 
                <a href="Leaflee Clean - Professional Eco-Friendly Cleaning Services" class="text-green-600 hover:text-green-700 underline">Our Case Studies</a> | 
                <a href="mailto:YOUR-EMAIL" class="text-green-600 hover:text-green-700 underline">Contact Us</a>
            </p>
        </div>
    </footer>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- Utility to load scripts ---
            function loadScript(src, callback) {
                const script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = src;
                script.async = true;
                script.onload = callback;
                document.head.appendChild(script);
            }

            // --- Package Details Object ---
            const packageInfo = {
                standard: {
                    title: 'The Standard Clean',
                    details: [
                        'Dust all surfaces & ceiling fans',
                        'Vacuum carpets & mop floors',
                        'Wipe kitchen counters & sink',
                        'Clean exterior of appliances',
                        'Clean & sanitize all bathrooms'
                    ]
                },
                deep: {
                    title: 'The Deep Clean',
                    details: [
                        '<strong>Everything in Standard, PLUS:</strong>',
                        'Hand-wipe all baseboards',
                        'Hand-wipe door frames & sills',
                        'Wipe cabinet exteriors',
                        'Extra scrub on tile/grout'
                    ]
                },
                moveout: {
                    title: 'The Move-Out Clean',
                    details: [
                        '<strong>Everything in Deep, PLUS:</strong>',
                        'Inside all cabinets & drawers',
                        'Inside all closets',
                        'Inside the oven',
                        'Inside the refrigerator'
                    ]
                },
                custom: {
                    title: 'The Custom Clean',
                    details: [
                        'Post-event cleanup',
                        'Small office / Commercial',
                        'School or gathering spaces',
                        'Any other custom job!'
                    ]
                }
            };

            // --- Get all the elements we need ---
            const homeSizeSelect = document.getElementById('homeSize');
            const packageRadios = document.querySelectorAll('input[name="packageType"]');
            const addonCheckboxes = document.querySelectorAll('input[type="checkbox"]');
            
            // Summary Box Elements
            const totalDisplay = document.getElementById('totalEstimateDisplay');
            const customQuoteMessage = document.getElementById('customQuoteMessage');
            const packageTitleEl = document.getElementById('packageTitle');
            const packageDetailsEl = document.getElementById('packageDetails');
            const addonsListEl = document.getElementById('addonsList');
            const scrollToScheduleBtn = document.getElementById('scrollToSchedule');
            
            // Calendly Elements
            const calendlyWidgetContainer = document.getElementById('calendly-widget');
            const scheduleSection = document.getElementById('schedule');
            
            // --- Set your base Calendly URL (WITH NEW PARAMETERS) ---
            const baseCalendlyUrl = "https://calendly.com/leafleeclean/new-meeting?hide_event_type_details=1&hide_cookie_banner=1";

            // Get specific add-ons for the move-out logic
            const addonFridge = document.getElementById('addonFridge');
            const addonOven = document.getElementById('addonOven');
            

            // --- This function reloads the Calendly widget ---
            function updateCalendlyWidget(quoteSummary) {
                let prefillUrl = `${baseCalendlyUrl}&a1=${encodeURIComponent(quoteSummary)}`;

                calendlyWidgetContainer.innerHTML = ''; 

                if (typeof Calendly !== 'undefined') {
                    Calendly.initInlineWidget({
                        url: prefillUrl,
                        parentElement: calendlyWidgetContainer
                    });
                }
            }


            function calculateTotal() {
                // 1. Get Base Price from Home Size and Package
                const selectedPackage = document.querySelector('input[name="packageType"]:checked').value;
                const selectedSizeOption = homeSizeSelect.options[homeSizeSelect.selectedIndex];
                const sizeData = JSON.parse(selectedSizeOption.value);
                const isCustomQuoteSize = selectedSizeOption.dataset.custom === 'true';
                const isCustomPackage = selectedPackage === 'custom';

                // Get text for selections
                const sizeText = selectedSizeOption.text;
                const packageDetails = packageInfo[selectedPackage];
                
                // Update Package Details in Summary Box
                packageTitleEl.textContent = packageDetails.title;
                packageDetailsEl.innerHTML = packageDetails.details.map(item => `<li>${item}</li>`).join('');


                let basePriceLow = 0;
                let basePriceHigh = 0;
                if (!isCustomPackage && !isCustomQuoteSize) {
                    const packagePriceData = sizeData[selectedPackage];
                    basePriceLow = packagePriceData.low;
                    basePriceHigh = packagePriceData.high;
                }
                
                // 2. Get Add-On Total and Text
                let addonTotal = 0;
                let addOnsDetails = []; 
                addonCheckboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        addonTotal += parseInt(checkbox.value, 10);
                        addOnsDetails.push(checkbox.dataset.name);
                    }
                });
                
                // Update Add-Ons List in Summary Box
                if (addOnsDetails.length > 0) {
                    addonsListEl.textContent = addOnsDetails.join(', ');
                } else {
                    addonsListEl.textContent = 'None';
                }

                // 3. Calculate Final Total
                const totalLow = basePriceLow + addonTotal;
                const totalHigh = basePriceHigh + addonTotal;

                let quoteSummary = "";

                // 4. Update the display
                if (isCustomQuoteSize || isCustomPackage) {
                    totalDisplay.classList.add('hidden');
                    customQuoteMessage.classList.remove('hidden');
                    
                    let customReason = "";
                    if (isCustomQuoteSize) customReason = `Size: ${sizeText}`;
                    if (isCustomPackage) customReason = `Package: ${packageDetails.title}`; // Use the title
                    if (isCustomQuoteSize && isCustomPackage) customReason = `Size: ${sizeText}, Package: ${packageDetails.title}`;

                    quoteSummary = `Quote Request For:\n${customReason}\nAdd-ons: ${addOnsDetails.length > 0 ? addOnsDetails.join(', ') : 'None'}\nTotal: Free On-Site Quote Required`;

                } else {
                    totalDisplay.classList.remove('hidden');
                    customQuoteMessage.classList.add('hidden');
                    
                    totalDisplay.textContent = `$${totalLow} - $${totalHigh}`;
                    
                    quoteSummary = `Quote Request For:\nSize: ${sizeText}\nPackage: ${packageDetails.title}\nAdd-ons: ${addOnsDetails.length > 0 ? addOnsDetails.join(', ') : 'None'}\nEst. Price: $${totalLow} - $${totalHigh}`;
                }

                // 4c. Update the Calendly widget by re-initializing it
                updateCalendlyWidget(quoteSummary);
            }

            function handlePackageChange() {
                const selectedPackage = document.querySelector('input[name="packageType"]:checked').value;
                
                // Smart Logic for Move-Out
                if (selectedPackage === 'moveout') {
                    addonFridge.checked = true;
                    addonFridge.disabled = true;
                    addonFridge.parentElement.classList.add('opacity-50', 'cursor-not-allowed');

                    addonOven.checked = true;
                    addonOven.disabled = true;
                    addonOven.parentElement.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    // Re-enable for all other packages, but don't uncheck
                    addonFridge.disabled = false;
                    addonFridge.parentElement.classList.remove('opacity-50', 'cursor-not-allowed');
                    
                    addonOven.disabled = false;
                    addonOven.parentElement.classList.remove('opacity-50', 'cursor-not-allowed');
                }
                
                calculateTotal(); // Recalculate when package changes
            }

            // --- Event Listeners ---
            homeSizeSelect.addEventListener('change', calculateTotal);
            addonCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', calculateTotal);
            });
            packageRadios.forEach(radio => {
                radio.addEventListener('change', handlePackageChange);
            });
            
            // Scroll-to button
            scrollToScheduleBtn.addEventListener('click', () => {
                scheduleSection.scrollIntoView({ behavior: 'smooth' });
            });


            // --- Initial Load ---
            loadScript("https://assets.calendly.com/assets/external/widget.js", () => {
                // Now `Calendly` is defined, run the first calculation
                handlePackageChange(); 
            });
        });
    </script>
</body>
</html>


