<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflee Cleaning Services - Price Guide</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* Custom Styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb; /* Light gray background */
        }

        /* Custom scrollbar for the price table on mobile */
        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
        }

        /* Make table full-width until it hits its min-width */
        .table-responsive table {
            min-width: 800px; /* Ensures headers don't wrap ugly */
            width: 100%;
        }
        
        /* Custom radio button styles */
        input[type="radio"]:checked + label {
            border-color: #10B981; /* Green-500 */
            box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.1), 0 2px 4px -1px rgba(16, 185, 129, 0.06);
            transform: translateY(-2px);
        }
        
        /* Custom checkbox styles */
        input[type="checkbox"]:checked {
            background-color: #10B981;
            border-color: #10B981;
        }

    </style>
</head>
<body class="text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-6 py-4 max-w-6xl">
            <h1 class="text-3xl font-bold text-gray-900">
                <span class="text-green-600">Leaflee</span> Cleaning
            </h1>
            <p class="mt-1 text-gray-600">Your Price & Booking Guide for Savannah, GA</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-12 max-w-6xl">

        <!-- Calculator Section -->
        <section id="calculator" class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg mb-12">
            <h2 class="text-2xl sm:text-3xl font-bold text-center mb-8 text-green-700">Get an Instant Estimate</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Left Column: Selections -->
                <div>
                    <!-- Step 1: Home Size -->
                    <div class="mb-6">
                        <label for="homeSize" class="block text-lg font-semibold mb-2 text-gray-700">1. Select Your Home Size</label>
                        <select id="homeSize" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition">
                            <option value='{"standard": 125, "deep": 195, "moveout": 275}'>Apartment / < 1,000 sq. ft.</option>
                            <option value='{"standard": 140, "deep": 240, "moveout": 320}'>1,001 - 1,500 sq. ft.</option>
                            <option value='{"standard": 165, "deep": 290, "moveout": 380}' selected>1,501 - 2,000 sq. ft.</option>
                            <option value='{"standard": 190, "deep": 345, "moveout": 450}'>2,001 - 2,500 sq. ft.</option>
                            <option value='{"standard": 220, "deep": 400, "moveout": 525}'>2,501 - 3,000 sq. ft.</option>
                            <option value='{"standard": 0, "deep": 0, "moveout": 0}' data-custom="true">3,000+ sq. ft.</option>
                        </select>
                    </div>

                    <!-- Step 2: Package Type -->
                    <div class="mb-6">
                        <h3 class="block text-lg font-semibold mb-3 text-gray-700">2. Choose Your Package</h3>
                        <!-- Changed to a 2x2 grid -->
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                            <input type="radio" name="packageType" value="standard" id="pkgStandard" class="hidden" checked>
                            <label for="pkgStandard" class="block p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition-all duration-200 ease-in-out text-center hover:border-gray-400">
                                <span class="font-bold text-green-700">Standard</span>
                                <span class="text-sm text-gray-500 block">The Refresh</span>
                            </label>

                            <input type="radio" name="packageType" value="deep" id="pkgDeep" class="hidden">
                            <label for="pkgDeep" class="block p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition-all duration-200 ease-in-out text-center hover:border-gray-400">
                                <span class="font-bold text-blue-700">Deep</span>
                                <span class="text-sm text-gray-500 block">The Overhaul</span>
                            </label>

                            <input type="radio" name="packageType" value="moveout" id="pkgMoveout" class="hidden">
                            <label for="pkgMoveout" class="block p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition-all duration-200 ease-in-out text-center hover:border-gray-400">
                                <span class="font-bold text-purple-700">Move-Out</span>
                                <span class="text-sm text-gray-500 block">Empty Home</span>
                            </label>
                            
                            <!-- NEW CUSTOM OPTION -->
                            <input type="radio" name="packageType" value="custom" id="pkgCustom" class="hidden">
                            <label for="pkgCustom" class="block p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition-all duration-200 ease-in-out text-center hover:border-gray-400">
                                <span class="font-bold text-orange-700">Custom</span>
                                <span class="text-sm text-gray-500 block">Event/Other</span>
                            </label>
                        </div>
                    </div>

                    <!-- Step 3: Add-Ons -->
                    <div>
                        <h3 class="block text-lg font-semibold mb-3 text-gray-700">3. Select Add-Ons</h3>
                        <div class="space-y-3">
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition duration-150">
                                <input type="checkbox" id="addonFridge" value="30" class="h-5 w-5 rounded text-green-600 border-gray-300 focus:ring-green-500">
                                <span class="ml-3 text-gray-700">Inside the Refrigerator <span class="text-gray-500">(+$30)</span></span>
                            </label>
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition duration-150">
                                <input type="checkbox" id="addonOven" value="35" class="h-5 w-5 rounded text-green-600 border-gray-300 focus:ring-green-500">
                                <span class="ml-3 text-gray-700">Inside the Oven <span class="text-gray-500">(+$35)</span></span>
                            </label>
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition duration-150">
                                <input type="checkbox" id="addonWindows" value="45" class="h-5 w-5 rounded text-green-600 border-gray-300 focus:ring-green-500">
                                <span class="ml-3 text-gray-700">Interior Windows<span class="text-gray-500">(+$45)</span></span>
                            </label>
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition duration-150">
                                <input type="checkbox" id="addonGarage" value="25" class="h-5 w-5 rounded text-green-600 border-gray-300 focus:ring-green-500">
                                <span class="ml-3 text-gray-700">Sweep Garage or Porch <span class="text-gray-500">(+$25)</span></span>
                            </label>
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition duration-150">
                                <input type="checkbox" id="addonLaundry" value="20" class="h-5 w-5 rounded text-green-600 border-gray-300 focus:ring-green-500">
                                <span class="ml-3 text-gray-700">Laundry (per load) <span class="text-gray-500">(+$20)</span></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Total -->
                <div class="bg-green-50 p-6 rounded-2xl border border-green-200 flex flex-col items-center justify-center">
                    <h3 class="text-xl font-semibold text-green-800 mb-2">Your Estimated Total</h3>
                    <p id="totalEstimateDisplay" class="text-6xl font-extrabold text-green-700 mb-4">$165</p>
                    <p id="customQuoteMessage" class="text-xl font-semibold text-green-700 text-center hidden">
                        This request requires a custom quote.
                        <span class="block text-base font-normal text-green-600 mt-2">Please schedule a visit below for a free, no-obligation walkthrough.</span>
                    </p>
                </div>
            </div>
        </section>


        <!-- Calendly Embed Section -->
        <section id="schedule" class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg mb-12">
            <h2 class="text-2xl sm:text-3xl font-bold text-center mb-8 text-gray-800">Schedule Your Quote Visit</h2>
            <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">
                Your estimate is ready! Now, let's book a quick walkthrough. This helps us confirm the details and give you a final, locked-in price.
            </p>
            
            <div 
                id="calendly-widget" 
                style="min-width:320px;height:700px;"
            ></div>
        </section>


        <!-- Summary Tables Section -->
        <section id="summary" class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg mb-12">
            <h2 class="text-2xl sm:text-3xl font-bold text-center mb-8 text-gray-800">Our Services at a Glance</h2>

            <!-- What's Included Table -->
            <div class="mb-10">
                <!-- Changed to 2x2 grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Standard Clean -->
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-green-700 mb-4">The Standard Clean</h3>
                        <p class="text-sm text-gray-500 mb-4">Your weekly or bi-weekly refresh.</p>
                        <ul class="space-y-2 text-gray-700 list-disc list-inside">
                            <li>Dust all surfaces & ceiling fans</li>
                            <li>Vacuum carpets & mop floors</li>
                            <li>Wipe kitchen counters & sink</li>
                            <li>Clean exterior of appliances</li>
                            <li>Clean & sanitize all bathrooms</li>
                            <li>Empty wastebaskets</li>
                        </ul>
                    </div>
                    <!-- Deep Clean -->
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-blue-700 mb-4">The Deep Clean</h3>
                        <p class="text-sm text-gray-500 mb-4">Our top-to-bottom transformation.</p>
                        <ul class="space-y-2 text-gray-700 list-disc list-inside">
                            <li><strong class="font-medium">Everything in Standard, PLUS:</strong></li>
                            <li>Hand-wipe all baseboards</li>
                            <li>Hand-wipe door frames</li>
                            <li>Hand-wipe window sills</li>
                            <li>Wipe cabinet exteriors</li>
                            <li>Extra scrub on tile/grout</li>
                        </ul>
                    </div>
                    <!-- Move-Out Clean -->
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-purple-700 mb-4">The Move-Out Clean</h3>
                        <p class="text-sm text-gray-500 mb-4">Your "empty home" special.</p>
                        <ul class="space-y-2 text-gray-700 list-disc list-inside">
                            <li><strong class="font-medium">Everything in Deep, PLUS:</strong></li>
                            <li>(For Empty Homes Only)</li>
                            <li>Inside all cabinets & drawers</li>
                            <li>Inside all closets</li>
                            <li>Inside the oven</li>
                            <li>Inside the refrigerator</li>
                        </ul>
                    </div>
                    <!-- NEW CUSTOM CLEAN -->
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-orange-700 mb-4">The Custom Clean</h3>
                        <p class="text-sm text-gray-500 mb-4">For events, offices, or special requests.</p>
                        <p class="text-gray-700">
                            Have a special request that doesn't fit our standard packages?
                        </p>
                        <ul class="space-y-2 text-gray-700 list-disc list-inside mt-4">
                            <li>Post-event cleanup</li>
                            <li>Small office / Commercial</li>
                            <li>School or gathering spaces</li>
                            <li>Any other custom job!</li>
                        </ul>
                        <p class="text-gray-700 mt-4">
                            Just select this package in the calculator and schedule a free walkthrough.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Find Your Price Table -->
            <h3 class="text-xl font-bold text-center text-gray-800 mb-6">Find Your Price</h3>
            <p class="text-center text-gray-600 mb-4 text-sm max-w-2xl mx-auto">
                Prices listed are "Starting At" rates for a one-time service. We offer great discounts for weekly, bi-weekly, and monthly clients!
            </p>
            <div class="table-responsive rounded-lg border border-gray-200">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="py-3.5 px-6 text-left text-sm font-semibold text-gray-900">Home Size (Approx. Sq. Ft.)</th>
                            <th scope="col" class="py-3.5 px-6 text-center text-sm font-semibold text-green-700">Standard Clean</th>
                            <th scope="col" class="py-3.5 px-6 text-center text-sm font-semibold text-blue-700">Deep Clean</th>
                            <th scope="col" class="py-3.5 px-6 text-center text-sm font-semibold text-purple-700">Move-In / Move-Out</th>
                            <th scope="col" class="py-3.5 px-6 text-center text-sm font-semibold text-orange-700">Custom Clean</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 bg-white">
                        <tr>
                            <td class="whitespace-nowrap py-4 px-6 text-sm font-medium text-gray-900">Apartment / < 1,000 sq. ft.</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$125</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$195</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$275</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center font-medium" rowspan="6">Call for Quote</td>
                        </tr>
                        <tr>
                            <td class="whitespace-nowrap py-4 px-6 text-sm font-medium text-gray-900">1,001 - 1,500 sq. ft.</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$140</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$240</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$320</td>
                        </tr>
                        <tr>
                            <td class="whitespace-nowrap py-4 px-6 text-sm font-medium text-gray-900">1,501 - 2,000 sq. ft.</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$165</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$290</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$380</td>
                        </tr>
                        <tr>
                            <td class="whitespace-nowrap py-4 px-6 text-sm font-medium text-gray-900">2,001 - 2,500 sq. ft.</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$190</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$345</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$450</td>
                        </tr>
                        <tr>
                            <td class="whitespace-nowrap py-4 px-6 text-sm font-medium text-gray-900">2,501 - 3,000 sq. ft.</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$220</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$400</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center">$525</td>
                        </tr>
                        <tr>
                            <td class="whitespace-nowrap py-4 px-6 text-sm font-medium text-gray-900">3,000+ sq. ft.</td>
                            <td colspan="3" class="whitespace-nowrap py-4 px-6 text-sm text-gray-500 text-center font-medium">Please Call for a Custom Quote</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- A La Carte Table -->
            <h3 class="text-xl font-bold text-center text-gray-800 mt-10 mb-6">Customize Your Clean (A La Carte Add-Ons)</h3>
             <p class="text-center text-gray-600 mb-4 text-sm max-w-2xl mx-auto">
                Add to any Standard, Deep, or Custom package. (Oven & Fridge are included in Move-Out).
            </p>
            <div class="table-responsive rounded-lg border border-gray-200">
                <table class="min-w-full divide-y divide-gray-200" style="min-width: 1px;"> <!-- Reset min-width for simple table -->
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="py-3.5 px-6 text-left text-sm font-semibold text-gray-900">Service</th>
                            <th scope="col" class="py-3.5 px-6 text-left text-sm font-semibold text-gray-900">Price</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 bg-white">
                        <tr>
                            <td class="whitespace-nowrap py-4 px-6 text-sm font-medium text-gray-900">Inside the Refrigerator</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500">+ $30</td>
                        </tr>
                        <tr>
                            <td class="whitespace-nowrap py-4 px-6 text-sm font-medium text-gray-900">Inside the Oven</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500">+ $35</td>
                        </tr>
                        <tr>
                            <td class="whitespace-nowrap py-4 px-6 text-sm font-medium text-gray-900">Interior Windows (reachable panes)</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500">+ $45</td>
                        </tr>
                        <tr>
                            <td class="whitespace-nowrap py-4 px-6 text-sm font-medium text-gray-900">Sweep Garage or Porch</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500">+ $25</td>
                        </tr>
                        <tr>
                            <td class="whitespace-nowrap py-4 px-6 text-sm font-medium text-gray-900">Laundry (per load, wash, dry & fold)</td>
                            <td class="whitespace-nowrap py-4 px-6 text-sm text-gray-500">+ $20</td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200">
        <div class="container mx-auto px-6 py-8 max-w-6xl text-center text-gray-500">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">Ready to Reclaim Your Time?</h3>
            <p class="mb-6">We’re a local Savannah business, fully insured, and ready to make your home shine.</p>
            <div class="flex justify-center space-x-4">
                <a href="tel:YOUR-PHONE-NUMBER" class="bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-green-700 transition duration-200">
                    Call or Text Us
                </a>
                <a href="mailto:YOUR-EMAIL" class="bg-gray-700 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-gray-800 transition duration-200">
                    Email Us
                </a>
            </div>
            <p class="mt-8 text-sm">&copy; 2025 Leaflee Cleaning. All rights reserved.</p>
        </div>
    </footer>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- Utility to load scripts ---
            function loadScript(src, callback) {
                const script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = src;
                script.async = true;
                script.onload = callback;
                document.head.appendChild(script);
            }

            // Get all the elements we need
            const homeSizeSelect = document.getElementById('homeSize');
            const packageRadios = document.querySelectorAll('input[name="packageType"]');
            const addonCheckboxes = document.querySelectorAll('input[type="checkbox"]');
            const totalDisplay = document.getElementById('totalEstimateDisplay');
            const customQuoteMessage = document.getElementById('customQuoteMessage');
            
            // --- Get the Calendly widget container ---
            const calendlyWidgetContainer = document.getElementById('calendly-widget');
            
            // --- Set your base Calendly URL (This is correct) ---
            const baseCalendlyUrl = "https://calendly.com/thinkgallery1/new-meeting";

            // Get specific add-ons for the move-out logic
            const addonFridge = document.getElementById('addonFridge');
            const addonOven = document.getElementById('addonOven');
            

            // --- This function reloads the Calendly widget ---
            function updateCalendlyWidget(quoteSummary) {
                // 1. Create the new URL with pre-filled data
                let prefillUrl = baseCalendlyUrl;
                if (quoteSummary) {
                    // a1= specifies the *first* custom question
                    prefillUrl = `${baseCalendlyUrl}?a1=${encodeURIComponent(quoteSummary)}`;
                }

                // 2. Clear the container of the old widget
                calendlyWidgetContainer.innerHTML = ''; 

                // 3. Manually re-initialize the widget using Calendly's API
                if (typeof Calendly !== 'undefined') {
                    Calendly.initInlineWidget({
                        url: prefillUrl,
                        parentElement: calendlyWidgetContainer
                    });
                }
            }


            function calculateTotal() {
                // 1. Get Base Price from Home Size and Package
                const selectedPackage = document.querySelector('input[name="packageType"]:checked').value;
                const selectedSizeOption = homeSizeSelect.options[homeSizeSelect.selectedIndex];
                const sizeData = JSON.parse(selectedSizeOption.value);
                const isCustomQuoteSize = selectedSizeOption.dataset.custom === 'true';
                
                // NEW: Check for custom package
                const isCustomPackage = selectedPackage === 'custom';

                // Get text for selections
                const sizeText = selectedSizeOption.text;
                // Find the label for the selected package
                const packageLabel = document.querySelector(`label[for="pkg${selectedPackage.charAt(0).toUpperCase() + selectedPackage.slice(1)}"]`);
                const packageText = packageLabel ? packageLabel.querySelector('span').textContent : 'Unknown';


                let basePrice = 0;
                // Only calculate basePrice if it's NOT a custom package
                if (!isCustomPackage && !isCustomQuoteSize) {
                    basePrice = sizeData[selectedPackage];
                }
                
                // 2. Get Add-On Total and Text
                let addonTotal = 0;
                let addOnsDetails = []; // This will hold the text of selected add-ons
                addonCheckboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        addonTotal += parseInt(checkbox.value, 10);
                        // Get the text, but remove the price part like "(+$30)"
                        const addonText = checkbox.parentElement.querySelector('span').textContent.split(' (')[0].trim();
                        addOnsDetails.push(addonText);
                    }
                });

                // 3. Calculate Final Total
                const total = basePrice + addonTotal;

                // We will build a text summary for Calendly
                let quoteSummary = "";

                // 4. Update the display
                // UPDATED: Check for custom size OR custom package
                if (isCustomQuoteSize || isCustomPackage) {
                    totalDisplay.classList.add('hidden');
                    customQuoteMessage.classList.remove('hidden');
                    
                    // Set summary for a custom quote
                    let customReason = "";
                    if (isCustomQuoteSize) customReason = `Size: ${sizeText}`;
                    if (isCustomPackage) customReason = `Package: ${packageText}`;
                    if (isCustomQuoteSize && isCustomPackage) customReason = `Size: ${sizeText}, Package: ${packageText}`;


                    quoteSummary = `Quote Request For:\n${customReason}\nAdd-ons: ${addOnsDetails.length > 0 ? addOnsDetails.join(', ') : 'None'}\nTotal: Custom Quote Required`;

                } else {
                    totalDisplay.classList.remove('hidden');
                    customQuoteMessage.classList.add('hidden');
                    
                    // 4a. Update price
                    totalDisplay.textContent = `$${total}`;
                    
                    // 4b. Set summary for a standard quote
                    quoteSummary = `Quote Request For:\nSize: ${sizeText}\nPackage: ${packageText}\nAdd-ons: ${addOnsDetails.length > 0 ? addOnsDetails.join(', ') : 'None'}\nEstimated Total: $${total}`;
                }

                // 4c. Update the Calendly widget by re-initializing it
                updateCalendlyWidget(quoteSummary);
            }

            function handlePackageChange() {
                const selectedPackage = document.querySelector('input[name="packageType"]:checked').value;
                
                // Logic for move-out: disable fridge/oven add-ons as they are included
                if (selectedPackage === 'moveout') {
                    addonFridge.checked = false;
                    addonFridge.disabled = true;
                    addonFridge.parentElement.classList.add('opacity-50', 'cursor-not-allowed');

                    addonOven.checked = false;
                    addonOven.disabled = true;
                    addonOven.parentElement.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    // This 'else' block now correctly handles 'standard', 'deep', AND 'custom'
                    addonFridge.disabled = false;
                    addonFridge.parentElement.classList.remove('opacity-50', 'cursor-not-allowed');
                    
                    addonOven.disabled = false;
                    addonOven.parentElement.classList.remove('opacity-50', 'cursor-not-allowed');
                }
                
                calculateTotal(); // Recalculate when package changes
            }

            // --- Event Listeners ---
            // Add listeners to all controls
            homeSizeSelect.addEventListener('change', calculateTotal);
            addonCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', calculateTotal);
            });
            packageRadios.forEach(radio => {
                radio.addEventListener('change', handlePackageChange);
            });

            // --- Initial Load ---
            // We load the Calendly script first.
            // Once it's loaded, we run our initial calculation.
            loadScript("https://assets.calendly.com/assets/external/widget.js", () => {
                // Now `Calendly` is defined and we can run the first calculation
                handlePackageChange(); 
            });
        });
    </script>
</body>
</html>


